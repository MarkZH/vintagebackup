# Configuration Files

Instead of configuring Vintage Backup with command line parameters, which may result in a very long command, one may want to put all of the parameters in a file and then run the program like this:

`python3 vintagebackup.py --config config.txt`

## Format

### Options and parameters

Within a configuration file, put one parameter per line like so:

`<parameter>: <value>`

The `<parameter>` is the name of an option without the leading `--`. The parameter `--user-folder "C:\Users\Alice"` becomes `user-folder: C:\Users\Alice`.
To make the file more readable:
  - dashes may be replaced with spaces,
  - capitalization is ignored,
  - and, spacing around the colon is ignored.

So, all of the following are equivalent:

```
user-folder: C:\Users\Alice
user folder: C:\Users\Alice
User Folder: C:\Users\Alice
User Folder  :  C:\Users\Alice
```

If a parameter does not take a value (`--compare-contents`, `--force-copy`, or `--debug`), it should be written with the same format but with a blank value.

```
Force copy:
```

### Comments

Lines starting with `#` are ignored by Vintage Backup, so they may be used for comments and descriptions of settings.
Only `#` symbols at the beginning of a line work this way.
Because this character can be part of a file name, `#` symbols elsewhere in a line are treated like any other text.

### Example configuration file

Here's an example of a complete configuration file that can be used for regular backups:

```
# Main options
User folder: /home/bob
Backup folder: /mnt/backups/bobs backups
Filter: /home/bob/backup filter.txt

# Save lots of space
Hard link count: 50
Free up: 20GB

# Write a lot more information to the log file
Debug:
```

This is equivalent to the following command line:

```
python3 vintagebackup.py --user-folder /home/bob --backup-folder "/mnt/backups/bobs backups" --filter "/home/bob/backup filter.txt" --hard-link-count 50 --free-up 20GB --debug
```

Like the command line, the order of different parameters does not matter. If a parameter appears more than once, the last parameter value is used.

## Overriding configuration file options

If command line parameters are used in addition to a configuration file, the command line parameters take precedence over file options.
Let's say the above complete configuration file example is stored in `/home/bob/backup_config.txt`.
The following command line

```
python3 vintagebackup.py --config /home/bob/backup_config.txt --no-debug --free-up 10GB
```

would override the `Free up: 20GB` value with `10GB` and would add the `--no-debug` parameter, resulting in the following equivalent command line:

```
python3 vintagebackup.py --user-folder /home/bob --backup-folder "/mnt/backups/bobs backups" --filter "/home/bob/backup filter.txt" --hard-link-count 50 --debug --no-debug --free-up 10GB
```

The `--no-debug` parameter negates the `--debug` parameter.

## Generating a configuration file

A configuration file can be generated by Vintage Backup using the `--generate-config` option.
This will create a configuration file that is equivalent to the current command line options.
For example,
```
py -3.13 vintagebackup.py --user-folder C:\Users\Alice\ --backup-folder D:\Backups --filter C:\Users\Alice\backup_filter.txt --free-up "10 GB" --generate-config C:\Users\Alice\backup_config.txt
```
will create the following configuration file at `C:\Users\Alice\backup_config.txt`:
```
Backup folder: D:\Backups
User folder: C:\Users\Alice\
Filter: C:\Users\Alice\backup_filter.txt
Free up: 10 GB
Log: C:\Users\Alice\vintagebackup.log
```
The `Log` line is always included in the config file. In this case, the default log file location is used.

Now, the same backup routine can be run with
```
py -3.13 vintagebackup.py --config C:\Users\Alice\backup_config.txt
```
To make the resulting configuration file usable anywhere, arguments that take paths (`--user-folder`, `--backup-folder`, `--filter`, etc.) will have the full absolute paths written to the configuration file.
These should be checked for correctness after being generated.

## Other details

### No multiple configuration files

If the `--config` command line option is used multiple times, only the last configuration file will be used.

### No recursion

The only command line parameter that is not supported in a configuration file is `--config`.
This means that recursive configuration files that contain a line like `Config: another_config_file.txt` are not allowed.

### Quoting to preserve leading and trailing spaces in file names

Normally, no parameter value needs quotations marks unless quotation marks are a part of the value, like for a file name.
However, leading or trailing spaces will be trimmed from the parameter values.
If the value needs to retain those spaces, then put double quotes around the value.

```
Filter: " name with spaces at both ends.txt  "
```

In this example, the single space before name and two spaces at the end will be kept as part of the file name: ` name with spaces at both ends.txt  `.
The quotes will be removed.
File and folder names with newlines cannot be handled correctly.
Use names without newlines or use the command line if they cannot be renamed.

If a parameter value begins and ends with quotation marks that need to be kept, use another set of quotations marks.

```
Filter: ""file name that is quoted.txt""
```

In this example, the file name that will be passed to Vintage Backup is `"file name that is quoted.txt"`.

Quotes will only be removed in they are at both the start and end of a parameter value, and only one pair will be removed. Otherwise, quotes are not removed. For example,

```
Filter: the "alleged" filter file.txt
```

will result in `the "alleged" filter file.txt` being passed as the `--filter` argument to Vintage Backup.
